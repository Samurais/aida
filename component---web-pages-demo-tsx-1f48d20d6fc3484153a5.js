(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=l(n(182)),i=l(n(204)),a=l(n(760));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.location;return r.createElement(i.default,{location:t,style:{minHeight:"95vh"}},r.createElement(o.default,null),r.createElement(a.default,null))}},1063:function(e,t,n){"use strict";n.r(t);var r=n(114),o=n.n(r),i=n(111),a=n.n(i),l=n(112),s=n.n(l),u=n(113),c=n.n(u),p=n(0),f=n.n(p),d=n(5),h=n.n(d),m=n(12),g=n(228);function v(e){var t=[];return f.a.Children.forEach(e,function(e){t.push(e)}),t}var y=n(117),b=n.n(y),w=n(262),O=n(349),P=n.n(O),S=n(222),_=n(800),E=n.n(_),x=n(2),C=n.n(x),k=function(e){function t(){return a()(this,t),s()(this,e.apply(this,arguments))}return c()(t,e),t}(f.a.Component);k.propTypes={value:C.a.oneOfType([C.a.string,C.a.number])},k.isSelectOption=!0;var T=k;function M(e){return"string"==typeof e?e:null}function j(e){if(!e)return null;var t=e.props;if("value"in t)return t.value;if(e.key)return e.key;if(e.type&&e.type.isSelectOptGroup&&t.label)return t.label;throw new Error("Need at least a key or a value or a label (only for OptGroup) for "+e)}function D(e,t){return"value"===t?j(e):e.props[t]}function I(e){return e.combobox}function N(e){return e.multiple||e.tags}function R(e){return N(e)||I(e)}function A(e){return!R(e)}function V(e){var t=e;return void 0===e?t=[]:Array.isArray(e)||(t=[e]),t}function F(e){return typeof e+"-"+e}function L(e){e.preventDefault()}function W(e,t){for(var n=-1,r=0;r<e.length;r++)if(e[r]===t){n=r;break}return n}var z={userSelect:"none",WebkitUserSelect:"none"},B={unselectable:"on"};function G(e,t){return!t.props.disabled&&V(D(t,this.props.optionFilterProp)).join("").toLowerCase().indexOf(e.toLowerCase())>-1}function Y(e,t){return function(n){e[t]=n}}var H=n(132),U=n.n(H),K=n(335),X=n(351),q=n.n(X),Q=n(197),J=n.n(Q),$=function(e){function t(n){a()(this,t);var r=s()(this,e.call(this,n));return Z.call(r),r.lastInputValue=n.inputValue,r.saveMenuRef=Y(r,"menuRef"),r}return c()(t,e),t.prototype.componentDidMount=function(){this.scrollActiveItemToView(),this.lastVisible=this.props.visible},t.prototype.shouldComponentUpdate=function(e){return e.visible||(this.lastVisible=!1),e.visible},t.prototype.componentDidUpdate=function(e){var t=this.props;!e.visible&&t.visible&&this.scrollActiveItemToView(),this.lastVisible=t.visible,this.lastInputValue=t.inputValue},t.prototype.renderMenu=function(){var e=this,t=this.props,n=t.menuItems,r=t.defaultActiveFirstOption,i=t.value,a=t.prefixCls,l=t.multiple,s=t.onMenuSelect,u=t.inputValue,c=t.firstActiveValue,d=t.backfillValue;if(n&&n.length){var h={};l?(h.onDeselect=t.onMenuDeselect,h.onSelect=s):h.onClick=s;var m=function e(t,n){if(null===n||void 0===n)return[];var r=[];return f.a.Children.forEach(t,function(t){if(t.type.isMenuItemGroup)r=r.concat(e(t.props.children,n));else{var o=j(t),i=t.key;-1!==W(n,o)&&i&&r.push(i)}}),r}(n,i),g={},y=n;if(m.length||c){t.visible&&!this.lastVisible&&(g.activeKey=m[0]||c);var b=!1,w=function(t){return!b&&-1!==m.indexOf(t.key)||!b&&!m.length&&-1!==c.indexOf(t.key)?(b=!0,Object(p.cloneElement)(t,{ref:function(t){e.firstActiveItem=t}})):t};y=n.map(function(e){if(e.type.isMenuItemGroup){var t=v(e.props.children).map(w);return Object(p.cloneElement)(e,{},t)}return w(e)})}else this.firstActiveItem=null;var O=i&&i[i.length-1];return u===this.lastInputValue||O&&O===d||(g.activeKey=""),f.a.createElement(S.default,o()({ref:this.saveMenuRef,style:this.props.dropdownMenuStyle,defaultActiveFirst:r,role:"listbox"},g,{multiple:l},h,{selectedKeys:m,prefixCls:a+"-menu"}),y)}return null},t.prototype.render=function(){var e=this.renderMenu();return e?f.a.createElement("div",{style:{overflow:"auto"},onFocus:this.props.onPopupFocus,onMouseDown:L,onScroll:this.props.onPopupScroll},e):null},t}(f.a.Component);$.propTypes={defaultActiveFirstOption:C.a.bool,value:C.a.any,dropdownMenuStyle:C.a.object,multiple:C.a.bool,onPopupFocus:C.a.func,onPopupScroll:C.a.func,onMenuDeSelect:C.a.func,onMenuSelect:C.a.func,prefixCls:C.a.string,menuItems:C.a.any,inputValue:C.a.string,visible:C.a.bool};var Z=function(){var e=this;this.scrollActiveItemToView=function(){var t=Object(d.findDOMNode)(e.firstActiveItem),n=e.props;if(t){var r={onlyScrollIfNeeded:!0};n.value&&0!==n.value.length||!n.firstActiveValue||(r.alignWithTop=!0),J()(function(){q()(t,Object(d.findDOMNode)(e.menuRef),r)})}}},ee=$;$.displayName="DropdownMenu",K.a.displayName="Trigger";var te={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:0,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}},ne=function(e){function t(n){a()(this,t);var r=s()(this,e.call(this,n));return re.call(r),r.saveDropdownMenuRef=Y(r,"dropdownMenuRef"),r.saveTriggerRef=Y(r,"triggerRef"),r.state={dropdownWidth:null},r}return c()(t,e),t.prototype.componentDidMount=function(){this.setDropdownWidth()},t.prototype.componentDidUpdate=function(){this.setDropdownWidth()},t.prototype.render=function(){var e,t,n=this.props,r=n.onPopupFocus,i=U()(n,["onPopupFocus"]),a=i.multiple,l=i.visible,s=i.inputValue,u=i.dropdownAlign,c=i.disabled,p=i.showSearch,d=i.dropdownClassName,h=i.dropdownStyle,m=i.dropdownMatchSelectWidth,g=this.getDropdownPrefixCls(),v=((e={})[d]=!!d,e[g+"--"+(a?"multiple":"single")]=1,e),y=this.getDropdownElement({menuItems:i.options,onPopupFocus:r,multiple:a,inputValue:s,visible:l});t=c?[]:A(i)&&!p?["click"]:["blur"];var w=o()({},h),O=m?"width":"minWidth";return this.state.dropdownWidth&&(w[O]=this.state.dropdownWidth+"px"),f.a.createElement(K.a,o()({},i,{showAction:c?[]:this.props.showAction,hideAction:t,ref:this.saveTriggerRef,popupPlacement:"bottomLeft",builtinPlacements:te,prefixCls:g,popupTransitionName:this.getDropdownTransitionName(),onPopupVisibleChange:i.onDropdownVisibleChange,popup:y,popupAlign:u,popupVisible:l,getPopupContainer:i.getPopupContainer,popupClassName:b()(v),popupStyle:w}),i.children)},t}(f.a.Component);ne.propTypes={onPopupFocus:C.a.func,onPopupScroll:C.a.func,dropdownMatchSelectWidth:C.a.bool,dropdownAlign:C.a.object,visible:C.a.bool,disabled:C.a.bool,showSearch:C.a.bool,dropdownClassName:C.a.string,multiple:C.a.bool,inputValue:C.a.string,filterOption:C.a.any,options:C.a.any,prefixCls:C.a.string,popupClassName:C.a.string,children:C.a.any,showAction:C.a.arrayOf(C.a.string)};var re=function(){var e=this;this.setDropdownWidth=function(){var t=h.a.findDOMNode(e).offsetWidth;t!==e.state.dropdownWidth&&e.setState({dropdownWidth:t})},this.getInnerMenu=function(){return e.dropdownMenuRef&&e.dropdownMenuRef.menuRef},this.getPopupDOMNode=function(){return e.triggerRef.getPopupDomNode()},this.getDropdownElement=function(t){var n=e.props;return f.a.createElement(ee,o()({ref:e.saveDropdownMenuRef},t,{prefixCls:e.getDropdownPrefixCls(),onMenuSelect:n.onMenuSelect,onMenuDeselect:n.onMenuDeselect,onPopupScroll:n.onPopupScroll,value:n.value,backfillValue:n.backfillValue,firstActiveValue:n.firstActiveValue,defaultActiveFirstOption:n.defaultActiveFirstOption,dropdownMenuStyle:n.dropdownMenuStyle}))},this.getDropdownTransitionName=function(){var t=e.props,n=t.transitionName;return!n&&t.animation&&(n=e.getDropdownPrefixCls()+"-"+t.animation),n},this.getDropdownPrefixCls=function(){return e.props.prefixCls+"-dropdown"}},oe=ne;function ie(e,t,n){var r=C.a.oneOfType([C.a.string,C.a.number]),o=C.a.shape({key:r.isRequired,label:C.a.node});return e.labelInValue?C.a.oneOfType([C.a.arrayOf(o),o]).apply(void 0,arguments)?new Error("Invalid prop `"+t+"` supplied to `"+n+"`, when you set `labelInValue` to `true`, `"+t+"` should in shape of `{ key: string | number, label?: ReactNode }`."):void 0:("multiple"===e.mode||"tags"===e.mode||e.multiple||e.tags)&&""===e[t]?new Error("Invalid prop `"+t+"` of type `string` supplied to `"+n+"`, expected `array` when `multiple` or `tags` is `true`."):C.a.oneOfType([C.a.arrayOf(r),r]).apply(void 0,arguments)}ne.displayName="SelectTrigger";var ae={id:C.a.string,defaultActiveFirstOption:C.a.bool,multiple:C.a.bool,filterOption:C.a.any,children:C.a.any,showSearch:C.a.bool,disabled:C.a.bool,allowClear:C.a.bool,showArrow:C.a.bool,tags:C.a.bool,prefixCls:C.a.string,className:C.a.string,transitionName:C.a.string,optionLabelProp:C.a.string,optionFilterProp:C.a.string,animation:C.a.string,choiceTransitionName:C.a.string,onChange:C.a.func,onBlur:C.a.func,onFocus:C.a.func,onSelect:C.a.func,onSearch:C.a.func,onPopupScroll:C.a.func,onMouseEnter:C.a.func,onMouseLeave:C.a.func,onInputKeyDown:C.a.func,placeholder:C.a.any,onDeselect:C.a.func,labelInValue:C.a.bool,value:ie,defaultValue:ie,dropdownStyle:C.a.object,maxTagTextLength:C.a.number,maxTagCount:C.a.number,maxTagPlaceholder:C.a.oneOfType([C.a.node,C.a.func]),tokenSeparators:C.a.arrayOf(C.a.string),getInputElement:C.a.func,showAction:C.a.arrayOf(C.a.string)};function le(){}var se=function(e){function t(n){a()(this,t);var r=s()(this,e.call(this,n));ue.call(r);var o=t.getOptionsInfoFromProps(n);return r.state={value:t.getValueFromProps(n,!0),inputValue:n.combobox?t.getInputValueForCombobox(n,o,!0):"",open:n.defaultOpen,optionsInfo:o,skipBuildOptionsInfo:!0},r.saveInputRef=Y(r,"inputRef"),r.saveInputMirrorRef=Y(r,"inputMirrorRef"),r.saveTopCtrlRef=Y(r,"topCtrlRef"),r.saveSelectTriggerRef=Y(r,"selectTriggerRef"),r.saveRootRef=Y(r,"rootRef"),r.saveSelectionRef=Y(r,"selectionRef"),r}return c()(t,e),t.prototype.componentDidMount=function(){this.props.autoFocus&&this.focus()},t.prototype.componentDidUpdate=function(){if(N(this.props)){var e=this.getInputDOMNode(),t=this.getInputMirrorDOMNode();e.value?(e.style.width="",e.style.width=t.clientWidth+"px"):e.style.width=""}this.forcePopupAlign()},t.prototype.componentWillUnmount=function(){this.clearFocusTime(),this.clearBlurTime(),this.dropdownContainer&&(h.a.unmountComponentAtNode(this.dropdownContainer),document.body.removeChild(this.dropdownContainer),this.dropdownContainer=null)},t.prototype.focus=function(){A(this.props)?this.selectionRef.focus():this.getInputDOMNode().focus()},t.prototype.blur=function(){A(this.props)?this.selectionRef.blur():this.getInputDOMNode().blur()},t.prototype.renderClear=function(){var e=this.props,t=e.prefixCls,n=e.allowClear,r=this.state,i=r.value,a=r.inputValue,l=f.a.createElement("span",o()({key:"clear",onMouseDown:L,style:z},B,{className:t+"-selection__clear",onClick:this.onClearSelection}));return n?I(this.props)?a?l:null:a||i.length?l:null:null},t.prototype.render=function(){var e,t=this.props,n=N(t),r=this.state,i=t.className,a=t.disabled,l=t.prefixCls,s=this.renderTopControlNode(),u=this.state.open;u&&(this._options=this.renderFilterOptions());var c=this.getRealOpenState(),p=this._options||[],d={};for(var h in t)!t.hasOwnProperty(h)||"data-"!==h.substr(0,5)&&"aria-"!==h.substr(0,5)&&"role"!==h||(d[h]=t[h]);var m=o()({},d);R(t)||(m=o()({},m,{onKeyDown:this.onKeyDown,tabIndex:t.disabled?-1:0}));var g=((e={})[i]=!!i,e[l]=1,e[l+"-open"]=u,e[l+"-focused"]=u||!!this._focused,e[l+"-combobox"]=I(t),e[l+"-disabled"]=a,e[l+"-enabled"]=!a,e[l+"-allow-clear"]=!!t.allowClear,e[l+"-no-arrow"]=!t.showArrow,e);return f.a.createElement(oe,{onPopupFocus:this.onPopupFocus,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,dropdownAlign:t.dropdownAlign,dropdownClassName:t.dropdownClassName,dropdownMatchSelectWidth:t.dropdownMatchSelectWidth,defaultActiveFirstOption:t.defaultActiveFirstOption,dropdownMenuStyle:t.dropdownMenuStyle,transitionName:t.transitionName,animation:t.animation,prefixCls:t.prefixCls,dropdownStyle:t.dropdownStyle,combobox:t.combobox,showSearch:t.showSearch,options:p,multiple:n,disabled:a,visible:c,inputValue:r.inputValue,value:r.value,backfillValue:r.backfillValue,firstActiveValue:t.firstActiveValue,onDropdownVisibleChange:this.onDropdownVisibleChange,getPopupContainer:t.getPopupContainer,onMenuSelect:this.onMenuSelect,onMenuDeselect:this.onMenuDeselect,onPopupScroll:t.onPopupScroll,showAction:t.showAction,ref:this.saveSelectTriggerRef},f.a.createElement("div",{id:t.id,style:t.style,ref:this.saveRootRef,onBlur:this.onOuterBlur,onFocus:this.onOuterFocus,className:b()(g)},f.a.createElement("div",o()({ref:this.saveSelectionRef,key:"selection",className:l+"-selection\n            "+l+"-selection--"+(n?"multiple":"single"),role:"combobox","aria-autocomplete":"list","aria-haspopup":"true","aria-expanded":c},m),s,this.renderClear(),n||!t.showArrow?null:f.a.createElement("span",o()({key:"arrow",className:l+"-arrow",style:z},B,{onClick:this.onArrowClick}),f.a.createElement("b",null)))))},t}(f.a.Component);se.propTypes=ae,se.defaultProps={prefixCls:"rc-select",defaultOpen:!1,labelInValue:!1,defaultActiveFirstOption:!0,showSearch:!0,allowClear:!1,placeholder:"",onChange:le,onFocus:le,onBlur:le,onSelect:le,onSearch:le,onDeselect:le,onInputKeyDown:le,showArrow:!0,dropdownMatchSelectWidth:!0,dropdownStyle:{},dropdownMenuStyle:{},optionFilterProp:"value",optionLabelProp:"value",notFoundContent:"Not Found",backfill:!1,showAction:["click"],tokenSeparators:[],autoClearSearchValue:!0},se.getDerivedStateFromProps=function(e,t){var n=t.skipBuildOptionsInfo?t.optionsInfo:se.getOptionsInfoFromProps(e,t),r={optionsInfo:n,skipBuildOptionsInfo:!1};if("open"in e&&(r.open=e.open),"value"in e){var o=se.getValueFromProps(e);r.value=o,e.combobox&&(r.inputValue=se.getInputValueForCombobox(e,n))}return r},se.getOptionsFromChildren=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return f.a.Children.forEach(e,function(e){e&&(e.type.isSelectOptGroup?se.getOptionsFromChildren(e.props.children,t):t.push(e))}),t},se.getInputValueForCombobox=function(e,t,n){var r=[];if("value"in e&&!n&&(r=V(e.value)),"defaultValue"in e&&n&&(r=V(e.defaultValue)),!r.length)return"";var o=r=r[0];return e.labelInValue?o=r.label:t[F(r)]&&(o=t[F(r)].label),void 0===o&&(o=""),o},se.getLabelFromOption=function(e,t){return D(t,e.optionLabelProp)},se.getOptionsInfoFromProps=function(e,t){var n={};if(se.getOptionsFromChildren(e.children).forEach(function(t){var r=j(t);n[F(r)]={option:t,value:r,label:se.getLabelFromOption(e,t),title:t.props.title}}),t){var r=t.optionsInfo;t.value.forEach(function(e){var t=F(e);n[t]||void 0===r[t]||(n[t]=r[t])})}return n},se.getValueFromProps=function(e,t){var n=[];return"value"in e&&!t&&(n=V(e.value)),"defaultValue"in e&&t&&(n=V(e.defaultValue)),e.labelInValue&&(n=n.map(function(e){return e.key})),n};var ue=function(){var e=this;this.onInputChange=function(t){var n=e.props.tokenSeparators,r=t.target.value;if(N(e.props)&&n.length&&function(e,t){for(var n=0;n<t.length;++n)if(e.lastIndexOf(t[n])>0)return!0;return!1}(r,n)){var o=e.getValueByInput(r);return void 0!==o&&e.fireChange(o),e.setOpenState(!1,!0),void e.setInputValue("",!1)}e.setInputValue(r),e.setState({open:!0}),I(e.props)&&e.fireChange([r])},this.onDropdownVisibleChange=function(t){t&&!e._focused&&(e.clearBlurTime(),e.timeoutFocus(),e._focused=!0,e.updateFocusClassName()),e.setOpenState(t)},this.onKeyDown=function(t){if(!e.props.disabled){var n=t.keyCode;e.state.open&&!e.getInputDOMNode()?e.onInputKeyDown(t):n!==g.a.ENTER&&n!==g.a.DOWN||(e.setOpenState(!0),t.preventDefault())}},this.onInputKeyDown=function(t){var n=e.props;if(!n.disabled){var r=e.state,o=t.keyCode;if(!N(n)||t.target.value||o!==g.a.BACKSPACE){if(o===g.a.DOWN){if(!r.open)return e.openIfHasChildren(),t.preventDefault(),void t.stopPropagation()}else if(o===g.a.ENTER&&r.open)t.preventDefault();else if(o===g.a.ESC)return void(r.open&&(e.setOpenState(!1),t.preventDefault(),t.stopPropagation()));if(r.open){var i=e.selectTriggerRef.getInnerMenu();i&&i.onKeyDown(t,e.handleBackfill)&&(t.preventDefault(),t.stopPropagation())}}else{t.preventDefault();var a=r.value;a.length&&e.removeSelected(a[a.length-1])}}},this.onMenuSelect=function(t){var n=t.item;if(n){var r=e.state.value,o=e.props,i=j(n),a=r[r.length-1];if(e.fireSelect(i),N(o)){if(-1!==W(r,i))return;r=r.concat([i])}else{if(a&&a===i&&i!==e.state.backfillValue)return void e.setOpenState(!1,!0);r=[i],e.setOpenState(!1,!0)}e.fireChange(r);var l;l=I(o)?D(n,o.optionLabelProp):"",o.autoClearSearchValue&&e.setInputValue(l,!1)}},this.onMenuDeselect=function(t){var n=t.item;"click"===t.domEvent.type&&e.removeSelected(j(n)),e.props.autoClearSearchValue&&e.setInputValue("",!1)},this.onArrowClick=function(t){t.stopPropagation(),t.preventDefault(),e.props.disabled||e.setOpenState(!e.state.open,!e.state.open)},this.onPlaceholderClick=function(){e.getInputDOMNode()&&e.getInputDOMNode().focus()},this.onOuterFocus=function(t){e.props.disabled?t.preventDefault():(e.clearBlurTime(),(R(e.props)||t.target!==e.getInputDOMNode())&&(e._focused||(e._focused=!0,e.updateFocusClassName(),e.timeoutFocus())))},this.onPopupFocus=function(){e.maybeFocus(!0,!0)},this.onOuterBlur=function(t){e.props.disabled?t.preventDefault():e.blurTimer=setTimeout(function(){e._focused=!1,e.updateFocusClassName();var t=e.props,n=e.state.value,r=e.state.inputValue;if(A(t)&&t.showSearch&&r&&t.defaultActiveFirstOption){var o=e._options||[];if(o.length){var i=function e(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.type.isMenuItemGroup){var o=e(r.props.children);if(o)return o}else if(!r.props.disabled)return r}return null}(o);i&&(n=[j(i)],e.fireChange(n))}}else N(t)&&r&&(e.state.inputValue=e.getInputDOMNode().value="",void 0!==(n=e.getValueByInput(r))&&e.fireChange(n));t.onBlur(e.getVLForOnChange(n)),e.setOpenState(!1)},10)},this.onClearSelection=function(t){var n=e.props,r=e.state;if(!n.disabled){var o=r.inputValue,i=r.value;t.stopPropagation(),(o||i.length)&&(i.length&&e.fireChange([]),e.setOpenState(!1,!0),o&&e.setInputValue(""))}},this.onChoiceAnimationLeave=function(){e.forcePopupAlign()},this.getOptionInfoBySingleValue=function(t,n){var r=void 0;if((n=n||e.state.optionsInfo)[F(t)]&&(r=n[F(t)]),r)return r;var o=t;if(e.props.labelInValue){var i=function(e,t){var n=void 0;e=V(e);for(var r=0;r<e.length;r++)if(e[r].key===t){n=e[r].label;break}return n}(e.props.value,t);void 0!==i&&(o=i)}return{option:f.a.createElement(T,{value:t,key:t},t),value:t,label:o}},this.getOptionBySingleValue=function(t){return e.getOptionInfoBySingleValue(t).option},this.getOptionsBySingleValue=function(t){return t.map(function(t){return e.getOptionBySingleValue(t)})},this.getValueByLabel=function(t){if(void 0===t)return null;var n=null;return Object.keys(e.state.optionsInfo).forEach(function(r){var o=e.state.optionsInfo[r];V(o.label).join("")===t&&(n=o.value)}),n},this.getVLBySingleValue=function(t){return e.props.labelInValue?{key:t,label:e.getLabelBySingleValue(t)}:t},this.getVLForOnChange=function(t){var n=t;return void 0!==n?(n=e.props.labelInValue?n.map(function(t){return{key:t,label:e.getLabelBySingleValue(t)}}):n.map(function(e){return e}),N(e.props)?n:n[0]):n},this.getLabelBySingleValue=function(t,n){return e.getOptionInfoBySingleValue(t,n).label},this.getDropdownContainer=function(){return e.dropdownContainer||(e.dropdownContainer=document.createElement("div"),document.body.appendChild(e.dropdownContainer)),e.dropdownContainer},this.getPlaceholderElement=function(){var t=e.props,n=e.state,r=!1;n.inputValue&&(r=!0),n.value.length&&(r=!0),I(t)&&1===n.value.length&&!n.value[0]&&(r=!1);var i=t.placeholder;return i?f.a.createElement("div",o()({onMouseDown:L,style:o()({display:r?"none":"block"},z)},B,{onClick:e.onPlaceholderClick,className:t.prefixCls+"-selection__placeholder"}),i):null},this.getInputElement=function(){var t,n=e.props,r=n.getInputElement?n.getInputElement():f.a.createElement("input",{id:n.id,autoComplete:"off"}),o=b()(r.props.className,((t={})[n.prefixCls+"-search__field"]=!0,t));return f.a.createElement("div",{className:n.prefixCls+"-search__field__wrap"},f.a.cloneElement(r,{ref:e.saveInputRef,onChange:e.onInputChange,onKeyDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var o=0;o<t.length;o++)t[o]&&"function"==typeof t[o]&&t[o].apply(this,n)}}(e.onInputKeyDown,r.props.onKeyDown,e.props.onInputKeyDown),value:e.state.inputValue,disabled:n.disabled,className:o}),f.a.createElement("span",{ref:e.saveInputMirrorRef,className:n.prefixCls+"-search__field__mirror"},e.state.inputValue," "))},this.getInputDOMNode=function(){return e.topCtrlRef?e.topCtrlRef.querySelector("input,textarea,div[contentEditable]"):e.inputRef},this.getInputMirrorDOMNode=function(){return e.inputMirrorRef},this.getPopupDOMNode=function(){return e.selectTriggerRef.getPopupDOMNode()},this.getPopupMenuComponent=function(){return e.selectTriggerRef.getInnerMenu()},this.setOpenState=function(t,n){var r=e.props;if(e.state.open!==t){var o={open:t,backfillValue:void 0};!t&&A(r)&&r.showSearch&&e.setInputValue("",!1),t||e.maybeFocus(t,n),e.setState(o,function(){t&&e.maybeFocus(t,n)})}else e.maybeFocus(t,n)},this.setInputValue=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t!==e.state.inputValue&&(e.setState({inputValue:t},e.forcePopupAlign),n&&e.props.onSearch(t))},this.getValueByInput=function(t){var n=e.props,r=n.multiple,o=n.tokenSeparators,i=e.state.value,a=!1;return function(e,t){var n=new RegExp("["+o.join()+"]");return e.split(n).filter(function(e){return e})}(t).forEach(function(t){var n=[t];if(r){var o=e.getValueByLabel(t);o&&-1===W(i,o)&&(i=i.concat(o),a=!0,e.fireSelect(o))}else-1===W(i,t)&&(i=i.concat(n),a=!0,e.fireSelect(t))}),a?i:void 0},this.getRealOpenState=function(){var t=e.state.open,n=e._options||[];return!R(e.props)&&e.props.showSearch||t&&!n.length&&(t=!1),t},this.handleBackfill=function(t){if(e.props.backfill&&(A(e.props)||I(e.props))){var n=j(t);I(e.props)&&e.setInputValue(n,!1),e.setState({value:[n],backfillValue:n})}},this.filterOption=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G,o=e.state.value,i=o[o.length-1];if(!t||i&&i===e.state.backfillValue)return!0;var a=e.props.filterOption;return"filterOption"in e.props?!0===e.props.filterOption&&(a=r):a=r,!a||("function"==typeof a?a.call(e,t,n):!n.props.disabled)},this.timeoutFocus=function(){e.focusTimer&&e.clearFocusTime(),e.focusTimer=setTimeout(function(){e.props.onFocus()},10)},this.clearFocusTime=function(){e.focusTimer&&(clearTimeout(e.focusTimer),e.focusTimer=null)},this.clearBlurTime=function(){e.blurTimer&&(clearTimeout(e.blurTimer),e.blurTimer=null)},this.updateFocusClassName=function(){var t=e.rootRef,n=e.props;e._focused?P()(t).add(n.prefixCls+"-focused"):P()(t).remove(n.prefixCls+"-focused")},this.maybeFocus=function(t,n){if(n||t){var r=e.getInputDOMNode(),o=document.activeElement;r&&(t||R(e.props))?o!==r&&(r.focus(),e._focused=!0):o!==e.selectionRef&&(e.selectionRef.focus(),e._focused=!0)}},this.removeSelected=function(t,n){var r=e.props;if(!r.disabled&&!e.isChildDisabled(t)){n&&n.stopPropagation&&n.stopPropagation();var o=e.state.value.filter(function(e){return e!==t});if(N(r)){var i=t;r.labelInValue&&(i={key:t,label:e.getLabelBySingleValue(t)}),r.onDeselect(i,e.getOptionBySingleValue(t))}e.fireChange(o)}},this.openIfHasChildren=function(){var t=e.props;(f.a.Children.count(t.children)||A(t))&&e.setOpenState(!0)},this.fireSelect=function(t){e.props.onSelect(e.getVLBySingleValue(t),e.getOptionBySingleValue(t))},this.fireChange=function(t){var n=e.props;"value"in n||e.setState({value:t},e.forcePopupAlign);var r=e.getVLForOnChange(t),o=e.getOptionsBySingleValue(t);n.onChange(r,N(e.props)?o:o[0])},this.isChildDisabled=function(t){return v(e.props.children).some(function(e){return j(e)===t&&e.props&&e.props.disabled})},this.forcePopupAlign=function(){e.selectTriggerRef.triggerRef.forcePopupAlign()},this.renderFilterOptions=function(){var t=e.state.inputValue,n=e.props,r=n.children,o=n.tags,i=n.filterOption,a=n.notFoundContent,l=[],s=[],u=e.renderFilterOptionsFromChildren(r,s,l);if(o){var c=e.state.value;(c=c.filter(function(e){return-1===s.indexOf(e)&&(!t||String(e).indexOf(String(t))>-1)})).forEach(function(e){var t=e,n=f.a.createElement(S.Item,{style:z,role:"option",attribute:B,value:t,key:t},t);u.push(n),l.push(n)}),t&&l.every(function(n){var r=function(){return j(n)===t};return!1!==i?!e.filterOption.call(e,t,n,r):!r()})&&u.unshift(f.a.createElement(S.Item,{style:z,role:"option",attribute:B,value:t,key:t},t))}return!u.length&&a&&(u=[f.a.createElement(S.Item,{style:z,attribute:B,disabled:!0,role:"option",value:"NOT_FOUND",key:"NOT_FOUND"},a)]),u},this.renderFilterOptionsFromChildren=function(t,n,r){var i=[],a=e.props,l=e.state.inputValue,s=a.tags;return f.a.Children.forEach(t,function(t){if(t)if(t.type.isSelectOptGroup){var a=e.renderFilterOptionsFromChildren(t.props.children,n,r);if(a.length){var u=t.props.label,c=t.key;c||"string"!=typeof u?!u&&c&&(u=c):c=u,i.push(f.a.createElement(S.ItemGroup,{key:c,title:u},a))}}else{E()(t.type.isSelectOption,"the children of `Select` should be `Select.Option` or `Select.OptGroup`, instead of `"+(t.type.name||t.type.displayName||t.type)+"`.");var p=j(t);if(function(e,t){if(!A(t)&&!t.multiple&&"string"!=typeof e)throw new Error("Invalid `value` of type `"+typeof e+"` supplied to Option, expected `string` when `tags/combobox` is `true`.")}(p,e.props),e.filterOption(l,t)){var d=f.a.createElement(S.Item,o()({style:z,attribute:B,value:p,key:p,role:"option"},t.props));i.push(d),r.push(d)}s&&n.push(p)}}),i},this.renderTopControlNode=function(){var t=e.state,n=t.value,r=t.open,i=t.inputValue,a=e.props,l=a.choiceTransitionName,s=a.prefixCls,u=a.maxTagTextLength,c=a.maxTagCount,p=a.maxTagPlaceholder,d=a.showSearch,h=s+"-selection__rendered",m=null;if(A(a)){var g=null;if(n.length){var v=!1,y=1;d&&r?(v=!i)&&(y=.4):v=!0;var b=n[0],O=e.getOptionInfoBySingleValue(b),P=O.label,S=O.title;g=f.a.createElement("div",{key:"value",className:s+"-selection-selected-value",title:M(S||P),style:{display:v?"block":"none",opacity:y}},P)}m=d?[g,f.a.createElement("div",{className:s+"-search "+s+"-search--inline",key:"input",style:{display:r?"block":"none"}},e.getInputElement())]:[g]}else{var _=[],E=n,x=void 0;if(void 0!==c&&n.length>c){E=E.slice(0,c);var C=e.getVLForOnChange(n.slice(c,n.length)),k="+ "+(n.length-c)+" ...";p&&(k="function"==typeof p?p(C):p),x=f.a.createElement("li",o()({style:z},B,{onMouseDown:L,className:s+"-selection__choice "+s+"-selection__choice__disabled",key:"maxTagPlaceholder",title:M(k)}),f.a.createElement("div",{className:s+"-selection__choice__content"},k))}N(a)&&(_=E.map(function(t){var n=e.getOptionInfoBySingleValue(t),r=n.label,i=n.title||r;u&&"string"==typeof r&&r.length>u&&(r=r.slice(0,u)+"...");var a=e.isChildDisabled(t),l=a?s+"-selection__choice "+s+"-selection__choice__disabled":s+"-selection__choice";return f.a.createElement("li",o()({style:z},B,{onMouseDown:L,className:l,key:t,title:M(i)}),f.a.createElement("div",{className:s+"-selection__choice__content"},r),a?null:f.a.createElement("span",{className:s+"-selection__choice__remove",onClick:function(n){e.removeSelected(t,n)}}))})),x&&_.push(x),_.push(f.a.createElement("li",{className:s+"-search "+s+"-search--inline",key:"__input"},e.getInputElement())),m=N(a)&&l?f.a.createElement(w.default,{onLeave:e.onChoiceAnimationLeave,component:"ul",transitionName:l},_):f.a.createElement("ul",null,_)}return f.a.createElement("div",{className:h,ref:e.saveTopCtrlRef},e.getPlaceholderElement(),m)}};se.displayName="Select",Object(m.polyfill)(se);var ce=se,pe=function(e){function t(){return a()(this,t),s()(this,e.apply(this,arguments))}return c()(t,e),t}(f.a.Component);pe.isSelectOptGroup=!0;var fe=pe;n.d(t,"Option",function(){return T}),n.d(t,"OptGroup",function(){return fe}),n.d(t,"SelectPropTypes",function(){return ae}),ce.Option=T,ce.OptGroup=fe,t.default=ce},174:function(e,t,n){"use strict";var r;function o(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    text-align: center;\n    font-size: 19px;\n"]);return o=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.Logo=t.ColoredText=void 0,n(183);var i=((r=n(135))&&r.__esModule?r:{default:r}).default.div.withConfig({displayName:"Logo__ColoredText"})(["@keyframes text-gradient{to{background-position:-300% center;}}font-weight:bold;color:#1890ff;display:inline-block;text-decoration:none;background-image:linear-gradient(to right,#1890ff 25%,#c4ce35 50%,#ac24e2 75%,#1890ff 100%);background-size:300% auto;-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text;animation:text-gradient 16s ease-in-out infinite;"]);t.ColoredText=i;var a=i.extend(o());t.Logo=a},180:function(e,t,n){var r;e.exports=(r=n(181))&&r.default||r},181:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(0)),o=l(n(2)),i=l(n(41)),a=l(n(11));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.location,n=a.default.getResourcesForPathname(t.pathname);return r.default.createElement(i.default,{location:t,pageResources:n})};s.propTypes={location:o.default.shape({pathname:o.default.string.isRequired}).isRequired};var u=s;t.default=u},182:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o.createElement(i.default,{key:"helmet",title:"Aida",meta:[{name:"description",content:"Build amazing conversational experiences"},{content:"aida, chatito, chatbots, ai chatbots, nlu, nlp, natural language processing, tensorflowjs, keras, named entity recognition, text classification",name:"keywords"}]},o.createElement("link",{rel:"shortcut icon",href:"/favicon.ico"}),o.createElement("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),o.createElement("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),o.createElement("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),o.createElement("link",{rel:"manifest",href:"/site.webmanifest"}),o.createElement("link",{rel:"mask-icon",href:"/safari-pinned-tab.svg",color:"#5bbad5"}),o.createElement("meta",{name:"msapplication-TileColor",content:"#da532c"}),o.createElement("meta",{name:"theme-color",content:"#fcfcfc"}))};var r,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),i=(r=n(226))&&r.__esModule?r:{default:r}},204:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(267);var o=p(n(268));n(206);var i=p(n(150));n(270);var a=p(n(271));n(183);var l=p(n(137)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),u=p(n(135)),c=n(174);function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=a.default.Header,v=a.default.Content,y=a.default.Footer,b=/^\/demo(\/.*)?$/i,w=/^\/train(\/.*)?$/i,O=(0,u.default)(v).withConfig({displayName:"Layout__StyledContent"})(["> p{text-align:justify;}background:#fcfcfc;padding:48px 48px 48px 72px;min-height:280px;"]),P=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,h(t).apply(this,arguments))}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,s.Component),n=t,(r=[{key:"render",value:function(){var e="0";return b.test(this.props.location.pathname)?e="0":w.test(this.props.location.pathname)&&(e="1"),s.createElement(a.default,{style:{minHeight:"100vh"}},s.createElement(g,{style:{background:"#fcfcfc",padding:0,display:"flex"}},s.createElement(c.Logo,{style:{textAlign:"right",width:200,paddingLeft:24,paddingRight:24}},s.createElement(l.default,{to:"/",href:"/"},"< Aida />")),s.createElement("div",{style:{flex:1}}),s.createElement("div",{style:{padding:"0 48px 0 24px",display:"inline-block",textAlign:"right",float:"right"}},s.createElement("a",{href:"https://github.com/rodrigopivi/aida",title:"Aida",style:{fontSize:26}},s.createElement(i.default,{type:"github"})))),s.createElement(a.default,{style:{flexDirection:"row"}},s.createElement(a.default.Sider,{width:200,breakpoint:"lg",collapsedWidth:"0",theme:"light",style:{backgroundColor:"#fcfcfc"}},s.createElement(o.default,{theme:"light",mode:"inline",defaultSelectedKeys:[e],style:{background:"#fcfcfc"}},s.createElement(o.default.Item,{key:"0"},s.createElement(l.default,{to:"/demo",href:"/demo"},s.createElement(i.default,{type:"right-circle-o"}),"Demo")),s.createElement(o.default.Item,{key:"1"},s.createElement(l.default,{to:"/train",href:"/train"},s.createElement(i.default,{type:"right-circle-o"}),"Train your own")))),s.createElement(a.default,{style:{padding:"24px 0 0 24px"}},s.createElement(O,null,this.props.children),s.createElement(y,{style:{textAlign:"center"}},"Aida © 2018 Rodrigo Pimentel"))))}}])&&f(n.prototype,r),t}();t.default=P},221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PipelineModel=void 0,t.PipelineModel=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}},225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.graphql=function(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away,. Unfortunately, something went wrong and the query was left in the compiled code.\n\n.Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")},Object.defineProperty(t,"Link",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"withPrefix",{enumerable:!0,get:function(){return i.withPrefix}}),Object.defineProperty(t,"push",{enumerable:!0,get:function(){return i.push}}),Object.defineProperty(t,"replace",{enumerable:!0,get:function(){return i.replace}}),Object.defineProperty(t,"navigateTo",{enumerable:!0,get:function(){return i.navigateTo}}),Object.defineProperty(t,"PageRenderer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"parsePath",{enumerable:!0,get:function(){return l.default}}),t.StaticQuery=t.StaticQueryContext=void 0;var r=s(n(0)),o=s(n(2)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(137)),a=s(n(180)),l=s(n(40));function s(e){return e&&e.__esModule?e:{default:e}}var u=r.default.createContext({});t.StaticQueryContext=u;var c=function(e){return r.default.createElement(u.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):r.default.createElement("div",null,"Loading (StaticQuery)")})};t.StaticQuery=c,c.propTypes={data:o.default.object,query:o.default.string.isRequired,render:o.default.func,children:o.default.func}},314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AidaPipeline=void 0;var r=s(n(315)),o=s(n(316)),i=n(317),a=s(n(321)),l=s(n(322));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,l,"next",e)}function l(e){u(i,r,o,a,l,"throw",e)}a(void 0)})}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={config:{classification:{epochs:3,filterSizes:[2,4,8],lowConfidenceThreshold:.3,numFilters:128},default:{batchSize:120,drop:.5,embeddingDimensions:300,lossThresholdToStopTraining:0,maxNgrams:20,trainingValidationSplit:.3},ner:{epochs:3,lowConfidenceThreshold:.2,maxCharsPerWord:20,numFilters:[256,128]}}};t.AidaPipeline=function e(t){var n,s,u,d=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"pipelineDefinition",f),p(this,"datasetParams",void 0),p(this,"embeddingsModel",void 0),p(this,"classificationModel",void 0),p(this,"nerModel",void 0),p(this,"logger",void 0),p(this,"tokenizer",void 0),p(this,"train",(u=c(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.logger.log("START TRAINING PIPELINE MODELS!"),d.logger.log("=================================================================================================="),e.next=4,d.classificationModel.train(t);case 4:return e.next=6,d.nerModel.train(t);case 6:d.logger.log("FINISHED TRAINING PIPELINE MODELS!"),d.logger.log("==================================================================================================");case 8:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})),p(this,"test",(s=c(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.logger.log("START TESTING PIPELINE MODELS!"),d.logger.log("=================================================================================================="),e.next=4,d.classificationModel.test(t);case 4:return n=e.sent,e.next=7,d.nerModel.test(t);case 7:return r=e.sent,e.abrupt("return",{classificationStats:n,nerStats:r});case 9:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})),p(this,"predict",function(e){var t=d.classificationModel.predict(e);return{classification:t,ner:d.nerModel.predict(e,t)}}),p(this,"save",(n=c(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.logger.log("SAVING PIPELINE MODELS!"),d.logger.log("=================================================================================================="),n=d.classificationModel.tfModel(),r=d.nerModel.tfModel(),e.next=6,n.save(t.classificationPath);case 6:return e.next=8,r.save(t.nerPath);case 8:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})),t.pipelineDefinition&&(this.pipelineDefinition=t.pipelineDefinition),this.datasetParams=t.datasetParams,this.logger=t.logger,this.tokenizer=function(e){var t=e?e.toLowerCase():e;if("en"===t)return r.default;if("es"===t)return o.default;throw new Error("Invalid config language. Only 'en' and 'es' are supported.")}(this.datasetParams.language),this.embeddingsModel=new i.EmbeddingsModel(t.dictionary,this.pipelineDefinition.config.ner.maxCharsPerWord,t.datasetParams.maxWordsPerSentence,this.pipelineDefinition.config.default.maxNgrams,this.pipelineDefinition.config.default.embeddingDimensions,this.tokenizer);var h,m,g=Object.assign({},this.pipelineDefinition.config.default,this.pipelineDefinition.config.classification);t.trainStatsHandler&&(h=t.trainStatsHandler.classification,m=t.trainStatsHandler.ner),this.classificationModel=new a.default(g,this.datasetParams,this.embeddingsModel,this.logger,t.pretrainedClassifier,h);var v=Object.assign({},this.pipelineDefinition.config.default,this.pipelineDefinition.config.ner);this.nerModel=new l.default(v,this.datasetParams,this.embeddingsModel,this.logger,t.pretrainedNer,m)}},315:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"FILTER_CHARS_REGEXP",/[^a-z0-9\.,\?\'"!@#\$%\^&\*\(\)-_=\+;:<>\/\\\|\}\{\[\]`~ ]/gi),r(this,"WORD_SEPARATORS_REGEXP",/([\ \.\,\%\*\-\=\+\;\|\`\~])/g),r(this,"NON_ALPHANUMERIC_REGEXP",/[^a-z0-9]/gi),r(this,"UNKNOWN_NGRAM_KEY","__"),r(this,"NUMBERS_MAP",{zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9"}),r(this,"sanitizeSentence",function(e){return e.trim().toLowerCase().replace(t.FILTER_CHARS_REGEXP,"")}),r(this,"splitSentenceToWords",function(e){return t.sanitizeSentence(e).split(t.WORD_SEPARATORS_REGEXP).map(function(e){return e.trim()}).filter(function(e){return!!e})}),r(this,"splitWordToBiGrams",function(e){var t=[],n=e.length-2+1;if(n<1)return t;for(;n--;)t[n]=e.substr(n,2);return t}),r(this,"joinWordsToSentence",function(e){return e.join(" ")})};t.default=o},316:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"FILTER_CHARS_REGEXP",/[^aábcdeéfghijklmnñoópqrstuúüvwxyzAÁBCDEÉFGHIJKLMNÑOÓPQRSTUÚÜVWXYZ 0-9\.,\?\'"!@#\$%\^&\*\(\)-_=\+;:<>\/\\\|\}\{\[\]`~]/g),r(this,"WORD_SEPARATORS_REGEXP",/([\ \.\,\%\*\-\=\+\;\|\`\~])/g),r(this,"NON_ALPHANUMERIC_REGEXP",/[^aábcdeéfghijklmnñoópqrstuúüvwxyzAÁBCDEÉFGHIJKLMNÑOÓPQRSTUÚÜVWXYZ0-9]/g),r(this,"UNKNOWN_NGRAM_KEY","__"),r(this,"NUMBERS_MAP",{cero:"0",uno:"1",dos:"2",tres:"3",cuatro:"4",cinco:"5",seis:"6",siete:"7",ocho:"8",nueve:"9"}),r(this,"sanitizeSentence",function(e){return e.trim().toLowerCase().replace(t.FILTER_CHARS_REGEXP,"")}),r(this,"splitSentenceToWords",function(e){return t.sanitizeSentence(e).split(t.WORD_SEPARATORS_REGEXP).map(function(e){return e.trim()}).filter(function(e){return!!e})}),r(this,"splitWordToBiGrams",function(e){var t=[],n=e.length-3+1;if(n<1)return t;for(;n--;)t[n]=e.substr(n,3);return t}),r(this,"joinWordsToSentence",function(e){return e.join(" ")})};t.default=o},317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddingsModel=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(149)),o=n(318),i=n(320);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){var e,t;function n(e,t,o,i,a,s){var u=this;!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),l(this,"tokenizer",void 0),l(this,"dict",void 0),l(this,"maxCharsPerWord",void 0),l(this,"maxWords",void 0),l(this,"maxNgrams",void 0),l(this,"embeddingDimensions",void 0),l(this,"model",void 0),l(this,"embed",function(e){return r.tidy(function(){var t=u.maxWords,n=u.maxNgrams,o=r.layers.input({shape:[t,n],dtype:"int32"}),i=u.model.apply(o),a=r.model({inputs:o,outputs:i}),l=u.sentencesToWordIds(e),s=a.predictOnBatch(l);return l.dispose(),s})}),l(this,"dictionary",function(){return u.dict}),l(this,"sentencesToCharacterVectors",function(e){return r.tidy(function(){var t=u.dict.PRETRAINED,n=e.map(function(e){return u.tokenizer.splitSentenceToWords(e)}),o=r.buffer([e.length,u.maxWords,u.maxCharsPerWord*u.embeddingDimensions],"float32");return n.forEach(function(e,n){e.forEach(function(e,r){e.split("").forEach(function(e,i){var a=t.get(e);a||(a=t.get(u.tokenizer.UNKNOWN_NGRAM_KEY)),a&&a.forEach(function(e,t){o.set(e,n,r,i*u.embeddingDimensions+t)})})})}),o.toTensor()})}),l(this,"sentencesToWordIds",function(e){return r.tidy(function(){var t=e.map(function(e){return u.tokenizer.splitSentenceToWords(e)}),n=r.buffer([e.length,u.maxWords,u.maxNgrams],"int32");return t.forEach(function(e,t){e.forEach(function(e,r){void 0!==u.dict.WORD_TO_ID_MAP[e]?n.set(u.dict.WORD_TO_ID_MAP[e],t,r,0):e.length&&u.generateWordIdsFromNGrams(e).forEach(function(o,i){i>u.maxNgrams?console.warn("Word exceeding max n grams per word: ",e):n.set(o,t,r,i)})})}),n.toTensor()})}),l(this,"generateWordIdsFromNGrams",function(e){var t=[],n=function(e){return void 0!==u.dict.WORD_TO_ID_MAP[e]&&(t.push(u.dict.WORD_TO_ID_MAP[e]),!0)};if(e.length>2){var r=!0;if(u.tokenizer.splitWordToBiGrams(e).forEach(function(e){!n(e)&&r&&(r=!1)}),r)return t}return t=[],e.split("").forEach(n),t}),this.dict=e,this.maxCharsPerWord=t,this.maxWords=o,this.maxNgrams=i,this.embeddingDimensions=a,this.model=n.setupModel(this.dict,this.maxWords,this.maxNgrams,this.embeddingDimensions),this.tokenizer=s}return e=n,t=[{key:"setupModel",value:function(e,t,n,a){var l=r.sequential(),s=r.layers.embedding({embeddingsInitializer:new i.PreSavedEmbeddingsInitializer({dict:e.PRETRAINED,embeddingDimensions:a,maxNgrams:n,maxWords:t}),inputDim:e.PRETRAINED.size,inputLength:[n],maskZero:!0,outputDim:a,trainable:!1});return l.add(r.layers.timeDistributed({layer:s,inputShape:[t,n]})),l.add(new o.CombineNgramsLayer({})),l}}],null&&a(e.prototype,null),t&&a(e,t),n}();t.EmbeddingsModel=s},318:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CombineNgramsLayer=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(149)),o=n(461);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,s(t).apply(this,arguments))}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.layers.Layer),n=t,(i=[{key:"computeOutputShape",value:function(e){return[e[0],e[1],e[e.length-1]]}},{key:"call",value:function(e,t){var n=this;return r.tidy(function(){n.invokeCallHook(e,t);var i=r.sum(e,2),a=(0,o.l2Normalize)(i,2);return i.dispose(),a})}},{key:"getClassName",value:function(){return"CombineNgramsLayer"}}])&&a(n.prototype,i),t}();t.CombineNgramsLayer=c},320:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreSavedEmbeddingsInitializer=void 0;var r=a(n(149)),o=a(n(467)),i=n(179);function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,f(p(p(n=!(r=u(t).call(this))||"object"!==l(r)&&"function"!=typeof r?p(this):r)),"config",void 0),f(p(p(n)),"className",t.className),n.config=e,n}var n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,o.Initializer),n=t,(a=[{key:"apply",value:function(e){var t=this;return r.tidy(function(){var e=(0,i.flatMapDeep)(function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t.config.dict.values()));return r.tensor2d(e,[t.config.dict.size,t.config.embeddingDimensions],"float32")})}},{key:"getConfig",value:function(){return this.config.dict}}])&&s(n.prototype,a),t}();t.PreSavedEmbeddingsInitializer=d,f(d,"className","PreSavedEmbeddingsInitializer"),r.serialization.SerializationMap.register(d)},321:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(149)),o=n(179),i=a(n(221));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,l,"next",e)}function l(e){u(i,r,o,a,l,"throw",e)}a(void 0)})}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){var t,n;function a(e,t,n,i,u,f){var d,g;return function(e,t){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this,g=p(a).call(this),m(h(h(d=!g||"object"!==l(g)&&"function"!=typeof g?h(this):g)),"config",void 0),m(h(h(d)),"datasetParams",void 0),m(h(h(d)),"model",void 0),m(h(h(d)),"embeddingsModel",void 0),m(h(h(d)),"logger",void 0),m(h(h(d)),"classificationTrainStatsHandler",void 0),m(h(h(d)),"tfModel",function(){return d.model}),m(h(h(d)),"predict",function(e){var t=[];return r.tidy(function(){var n=d.embeddingsModel.embed(e),r=d.model.predict(n),o=r.dataSync();r.dispose(),n.dispose();var i=d.datasetParams.intents;e.forEach(function(e,n){var r=[];o.slice(n*i.length,n*i.length+i.length).forEach(function(t,n){return r.push({confidence:t,intent:i[n],sentence:e})}),r.sort(function(e,t){return e.confidence>t.confidence?0:1}),t.push(r[0])})}),t}),m(h(h(d)),"train",function(){var e=c(regeneratorRuntime.mark(function e(t){var n,i,a,l,u,c,p,f,h,m,g,v,y,b,w,O,P;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,o.chunk)(t.trainY,d.config.batchSize),i=(0,o.chunk)(t.trainX,d.config.batchSize),d.logger.log("Start training classification model!"),a=d.model,l=!1,u=!0,c=!1,p=void 0,e.prev=8,f=i.entries()[Symbol.iterator]();case 10:if(u=(h=f.next()).done){e.next=34;break}if(m=s(h.value,2),g=m[0],v=m[1],!l){e.next=14;break}return e.abrupt("return");case 14:return y=d.embeddingsModel.embed(v),b=r.tensor1d(n[g],"int32"),w=r.oneHot(b,d.datasetParams.intents.length),e.next=19,a.fit(y,w,{batchSize:d.config.batchSize,callbacks:{onBatchEnd:r.nextFrame},epochs:d.config.epochs,shuffle:!0,validationSplit:d.config.trainingValidationSplit});case 19:b.dispose(),y.dispose(),w.dispose(),O=a.history.history,P=O.val_loss.length-1,d.classificationTrainStatsHandler&&d.classificationTrainStatsHandler({batch:g+1,batchEpochs:a.history.epoch.length,currentBatchSize:i[g].length,tensorsInMemory:r.memory().numTensors,totalBatches:i.length,trainingAccuracy:O.acc[P],trainingLoss:O.loss[P],validationAccuracy:O.val_acc[P],validationLoss:O.val_loss[P]}),d.logger.log("Trained ".concat(a.history.epoch.length," epochs on batch ").concat(g+1," of ").concat(i.length)),d.logger.log("Training Loss: ".concat(O.loss[P]," | Training Accuracy: ").concat(O.acc[P])),d.logger.log("Validation Loss: ".concat(O.val_loss[P]," | Validation Accuracy: ").concat(O.val_acc[P])),d.logger.warn("(Memory) Number of tensors in memory at the end of batch: ".concat(r.memory().numTensors)),d.logger.log("=================================================================================================="),d.config.lossThresholdToStopTraining&&O.loss[P]<d.config.lossThresholdToStopTraining&&O.val_loss[P]<d.config.lossThresholdToStopTraining&&(l=!0,d.logger.warn("Enough accuracy reached! Ending training after batch ".concat(g+1," of ").concat(i.length)),d.logger.log("=================================================================================================="));case 31:u=!0,e.next=10;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(8),c=!0,p=e.t0;case 40:e.prev=40,e.prev=41,u||null==f.return||f.return();case 43:if(e.prev=43,!c){e.next=46;break}throw p;case 46:return e.finish(43);case 47:return e.finish(40);case 48:case"end":return e.stop()}},e,this,[[8,36,40,48],[41,,43,47]])}));return function(t){return e.apply(this,arguments)}}()),m(h(h(d)),"test",function(){var e=c(regeneratorRuntime.mark(function e(t,n){var r,i,a,l,u,c,p,f,h,m,g,v,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=n||d.defaultResultsLogger,i={correct:0,wrong:0,lowConfidence:0},a=(0,o.chunk)(t.testX,100),l=(0,o.chunk)(t.testY,100),u=!0,c=!1,p=void 0,e.prev=7,f=a.entries()[Symbol.iterator]();!(u=(h=f.next()).done);u=!0)m=s(h.value,2),g=m[0],v=m[1],y=d.predict(v),r(v,l[g],y,i);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),c=!0,p=e.t0;case 15:e.prev=15,e.prev=16,u||null==f.return||f.return();case 18:if(e.prev=18,!c){e.next=21;break}throw p;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return e.abrupt("return",i);case 24:case"end":return e.stop()}},e,this,[[7,11,15,23],[16,,18,22]])}));return function(t,n){return e.apply(this,arguments)}}()),m(h(h(d)),"defaultResultsLogger",function(e,t,n,r){return e.forEach(function(e,o){var i=d.datasetParams.intents[t[o]],a=n[o].intent===i;if(n[o].confidence<d.config.lowConfidenceThreshold){if(void 0===r.lowConfidence)return;r.lowConfidence++,d.logger.warn("LOW CONFIDENCE (intent: ".concat(n[o].intent,", confidence: ").concat(n[o].confidence,") - ").concat(e))}else a?(r.correct++,d.logger.debug("CORRECT (intent: ".concat(n[o].intent,", confidence: ").concat(n[o].confidence,") - ").concat(e))):(r.wrong++,d.logger.error("WRONG (intent: ".concat(n[o].intent,", confidence: ").concat(n[o].confidence,") - ").concat(e)))}),r}),d.config=e,d.datasetParams=t,d.embeddingsModel=n,d.model=u||a.setup(d.config,d.datasetParams),d.logger=i,d.classificationTrainStatsHandler=f,d}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,i.PipelineModel),t=a,n=[{key:"setup",value:function(e,t){var n=t.maxWordsPerSentence,o=t.intents.length,i=r.train.adam(.0066,.0025,.1),a=r.input({dtype:"float32",shape:[n,e.embeddingDimensions]}),l=r.layers.conv1d({activation:"relu",filters:e.numFilters,inputShape:[n,e.embeddingDimensions],kernelInitializer:"randomNormal",kernelSize:[e.filterSizes[0]],padding:"valid"}).apply(a),s=r.layers.maxPooling1d({padding:"valid",poolSize:n-e.filterSizes[0]+1}).apply(l),u=r.layers.conv1d({activation:"relu",filters:e.numFilters,inputShape:[n,e.embeddingDimensions],kernelInitializer:"randomNormal",kernelSize:[e.filterSizes[1]],padding:"valid"}).apply(a),c=r.layers.maxPooling1d({padding:"valid",poolSize:n-e.filterSizes[1]+1}).apply(u),p=r.layers.conv1d({activation:"relu",filters:e.numFilters,inputShape:[n,e.embeddingDimensions],kernelInitializer:"randomNormal",kernelSize:[e.filterSizes[2]],padding:"valid"}).apply(a),f=r.layers.maxPooling1d({padding:"valid",poolSize:n-e.filterSizes[2]+1}).apply(p),d=r.layers.concatenate({axis:1}).apply([s,c,f]),h=r.layers.flatten().apply(d),m=r.layers.dropout({rate:e.drop}).apply(h),g=r.layers.flatten().apply(s),v=r.layers.concatenate({axis:1}).apply([m,g]),y=r.layers.dense({activation:"softmax",units:o}).apply(v),b=r.model({inputs:a,outputs:y});return b.compile({loss:"categoricalCrossentropy",metrics:["accuracy"],optimizer:i}),b}}],null&&f(t.prototype,null),n&&f(t,n),a}();t.default=g},322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(149)),o=n(179),i=a(n(221));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,l,"next",e)}function l(e){u(i,r,o,a,l,"throw",e)}a(void 0)})}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){var t,n;function a(e,t,n,i,u,f){var d,g;return function(e,t){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this,g=p(a).call(this),m(h(h(d=!g||"object"!==s(g)&&"function"!=typeof g?h(this):g)),"config",void 0),m(h(h(d)),"datasetParams",void 0),m(h(h(d)),"model",void 0),m(h(h(d)),"embeddingsModel",void 0),m(h(h(d)),"logger",void 0),m(h(h(d)),"nerTrainStatsHandler",void 0),m(h(h(d)),"tfModel",function(){return d.model}),m(h(h(d)),"rawPrediction",function(e,t){return r.tidy(function(){var n=d.datasetParams,i=n.maxWordsPerSentence,a=n.slotsToId,l=Object.keys(a).length,s=d.embeddingsModel.embed(e),u=d.embeddingsModel.sentencesToCharacterVectors(e),c=t.map(function(e){var t=new Array(d.datasetParams.intents.length).fill(0),n=d.datasetParams.intents.indexOf(e.intent);return-1!==n&&(t[n]=1),t}),p=(0,o.flatMapDeep)(c),f=r.tensor2d(p,[c.length,d.datasetParams.intents.length]),h=d.model.predict([f,s,u]),m=h.dataSync();return h.dispose(),f.dispose(),s.dispose(),u.dispose(),(0,o.chunk)(m,i*l).map(function(e){return(0,o.chunk)(e,l)}).map(function(e){return e.map(function(e){var t=0,n=e.length?e[t]:0;return e.forEach(function(r,o){e[t]<r&&(t=o,n=r)}),{highestIndex:t,confidence:n}})})})}),m(h(h(d)),"predict",function(e,t){var n=d.config.lowConfidenceThreshold,r=d.datasetParams.slotsToId,o=d.rawPrediction(e,t);return e.map(function(e,t){var i=o[t],a=d.embeddingsModel.tokenizer.splitSentenceToWords(e);return a.reduce(function(t,o,l){t.current&&0===t.current.confidence&&(t.current.confidence=i[l].confidence);var s=Object.keys(r).find(function(e){return i[l]&&r[e]===i[l].highestIndex});return s&&t.current?(t.current.key!==s?(t.current.key&&"O"!==t.current.key&&t.current.confidence>=n&&(t.slots[t.current.key]||(t.slots[t.current.key]=[]),t.slots[t.current.key].push({confidence:t.current.confidence,value:t.current.value})),t.current={confidence:i[l].confidence,key:s,value:o}):(t.current.value+=" ".concat(o),t.current.confidence=(i[l].confidence+t.current.confidence)/2),l+1===a.length?("O"!==t.current.key&&t.current.confidence>=n&&(t.slots[t.current.key]||(t.slots[t.current.key]=[]),t.slots[t.current.key].push({confidence:t.current.confidence,value:t.current.value})),{sentence:e,slots:t.slots}):t):t},{current:{key:"",value:"",confidence:0},slots:{},sentence:""})})}),m(h(h(d)),"train",function(){var e=c(regeneratorRuntime.mark(function e(t){var n,i,a,u,c,p,f,h,m,g,v,y,b,w,O;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,o.chunk)(t.trainY2,d.config.batchSize),i=(0,o.chunk)(t.trainY,d.config.batchSize),a=(0,o.chunk)(t.trainX,d.config.batchSize),u=d.config,c=u.epochs,p=u.trainingValidationSplit,f=Object.keys(d.datasetParams.slotsToId).length,d.logger.log("Start training NER model!"),h=!1,m=!0,g=!1,v=void 0,e.prev=10,y=regeneratorRuntime.mark(function e(){var t,o,s,u,m,g,v,y,b,O;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l(w.value,2),o=t[0],s=t[1],!h){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:return u=r.tidy(function(){return r.oneHot(r.tensor1d(i[o],"int32"),d.datasetParams.intents.length).asType("float32")}),m=d.embeddingsModel.embed(s),g=d.embeddingsModel.sentencesToCharacterVectors(s),v=r.tidy(function(){var e=[],t=!0,i=!1,a=void 0;try{for(var l,s=n[o][Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var u=l.value,c=r.tensor1d(u,"int32").pad([[0,d.datasetParams.maxWordsPerSentence-u.length]]),p=r.oneHot(c,f).asType("float32");c.dispose(),e.push(p)}}catch(e){i=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}var h=r.stack(e);return e.forEach(function(e){return e.dispose()}),h}),e.next=9,d.model.fit([u,m,g],v,{callbacks:{onBatchEnd:r.nextFrame},epochs:c,shuffle:!0,validationSplit:p});case 9:return u.dispose(),m.dispose(),g.dispose(),e.next=14,r.nextFrame();case 14:y=d.model.history.history,b=y.val_loss.length-1,O=d.model.history.epoch,d.nerTrainStatsHandler&&d.nerTrainStatsHandler({batch:o+1,batchEpochs:O.length,currentBatchSize:a[o].length,tensorsInMemory:r.memory().numTensors,totalBatches:a.length,trainingAccuracy:y.acc[b],trainingLoss:y.loss[b],validationAccuracy:y.val_acc[b],validationLoss:y.val_loss[b]}),d.logger.log("Trained ".concat(O.length," epochs on batch ").concat(o+1," of ").concat(a.length)),d.logger.log("Training Loss: ".concat(y.loss[b]," | Training Accuracy: ").concat(y.acc[b])),d.logger.log("Validation Loss: ".concat(y.val_loss[b]," | Validation Accuracy: ").concat(y.val_acc[b])),d.logger.warn("(Memory) Number of tensors in memory at the end of batch: ".concat(r.memory().numTensors)),d.logger.log("=================================================================================================="),v.dispose(),d.config.lossThresholdToStopTraining&&y.loss[b]<d.config.lossThresholdToStopTraining&&y.val_loss[b]<d.config.lossThresholdToStopTraining&&(h=!0,d.logger.warn("Enough accuracy reached! Ending training after batch ".concat(o+1," of ").concat(a.length)),d.logger.log("=================================================================================================="));case 25:case"end":return e.stop()}},e,this)}),b=a.entries()[Symbol.iterator]();case 13:if(m=(w=b.next()).done){e.next=21;break}return e.delegateYield(y(),"t0",15);case 15:if("object"!==s(O=e.t0)){e.next=18;break}return e.abrupt("return",O.v);case 18:m=!0,e.next=13;break;case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(10),g=!0,v=e.t1;case 27:e.prev=27,e.prev=28,m||null==b.return||b.return();case 30:if(e.prev=30,!g){e.next=33;break}throw v;case 33:return e.finish(30);case 34:return e.finish(27);case 35:case"end":return e.stop()}},e,this,[[10,23,27,35],[28,,30,34]])}));return function(t){return e.apply(this,arguments)}}()),m(h(h(d)),"test",function(){var e=c(regeneratorRuntime.mark(function e(t,n){var i,a,s,u,c,p,f,h,m,g,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=n||d.defaultResultsLogger,a={correct:0,wrong:0},s=(0,o.chunk)(t.testX,100),u=(0,o.chunk)(t.testY,100),c=(0,o.chunk)(t.testY2,100),p=!0,f=!1,h=void 0,e.prev=8,m=regeneratorRuntime.mark(function e(){var t,n,o,s,p,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=l(v.value,2),n=t[0],o=t[1],s=u[n],p=o.map(function(e,t){return{confidence:1,intent:d.datasetParams.intents[s[t]],sentence:e}}),f=d.rawPrediction(o,p).map(function(e){return e.map(function(e){return e.highestIndex})}),i(o,c[n],f,a),e.next=7,r.nextFrame();case 7:case"end":return e.stop()}},e,this)}),g=s.entries()[Symbol.iterator]();case 11:if(p=(v=g.next()).done){e.next=16;break}return e.delegateYield(m(),"t0",13);case 13:p=!0,e.next=11;break;case 16:e.next=22;break;case 18:e.prev=18,e.t1=e.catch(8),f=!0,h=e.t1;case 22:e.prev=22,e.prev=23,p||null==g.return||g.return();case 25:if(e.prev=25,!f){e.next=28;break}throw h;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return e.abrupt("return",a);case 31:case"end":return e.stop()}},e,this,[[8,18,22,30],[23,,25,29]])}));return function(t,n){return e.apply(this,arguments)}}()),m(h(h(d)),"defaultResultsLogger",function(e,t,n,r){return e.forEach(function(e,o){var i=t[o],a=n[o],l=!0;i.forEach(function(e,t){a[t]!==e&&l&&(l=!1)}),l?(r.correct++,d.logger.debug("CORRECT - ".concat(e," expected: ").concat(i,", predicted: ").concat(a))):(r.wrong++,d.logger.error("WRONG - ".concat(e," expected: ").concat(i,", predicted: ").concat(a)))}),r}),d.config=e,d.datasetParams=t,d.embeddingsModel=n,d.model=u||a.setup(d.config,d.datasetParams),d.logger=i,d.nerTrainStatsHandler=f,d}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,i.PipelineModel),t=a,n=[{key:"setup",value:function(e,t){var n=t.maxWordsPerSentence,o=e.drop,i=e.embeddingDimensions,a=e.maxCharsPerWord,l=e.numFilters,s=Object.keys(t.slotsToId).length,u=r.train.adam(.0066,.0025,.1),c=r.input({dtype:"float32",shape:[t.intents.length]}),p=r.layers.repeatVector({n:n}).apply(c),f=r.input({dtype:"float32",shape:[n,i]}),d=r.layers.conv1d({activation:"relu",filters:l[0],inputShape:[n,i],kernelInitializer:"randomNormal",kernelSize:1,padding:"valid"}).apply(f),h=r.layers.conv1d({activation:"relu",filters:l[0],kernelInitializer:"randomNormal",kernelSize:1,padding:"valid"}).apply(d),m=r.input({dtype:"float32",shape:[n,a*i]}),g=r.layers.conv1d({activation:"relu",filters:l[1],inputShape:[n,a*i],kernelInitializer:"randomNormal",kernelSize:1,padding:"valid"}).apply(m),v=r.layers.dropout({rate:o}).apply(g),y=r.layers.conv1d({activation:"relu",filters:l[1],kernelInitializer:"randomNormal",kernelSize:1,padding:"valid"}).apply(v),b=r.layers.concatenate().apply([p,f,h,y]),w=r.layers.bidirectional({layer:r.layers.lstm({units:n,returnSequences:!0}),mergeMode:"concat"}).apply(b),O=r.layers.dense({activation:"softmax",units:s}).apply(w),P=r.model({inputs:[c,f,m],outputs:O});return P.compile({loss:"categoricalCrossentropy",metrics:["accuracy"],optimizer:u}),P}}],null&&f(t.prototype,null),n&&f(t,n),a}();t.default=g},323:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dictionariesFromDataset=function(e,t,n,i){var a={intents:Object.keys(e),intentsWithSlots:[],language:n,maxWordsPerSentence:0,slotsToId:{O:0},testX:[],testY:[],testY2:[],trainX:[],trainY:[],trainY2:[]},l=new Array(a.intents.length).fill(0),s=new Array(a.intents.length).fill(0),u=[],c=new Set;a.intents.forEach(function(n){var o=!1,i=e[n].map(function(e){var i=e.map(function(e){var r=t.splitSentenceToWords(e.value),i=new Array(r.length).fill(0),l=e.slot;if(l){c.add(n),o||(o=!0);var s=l;void 0===a.slotsToId[s]&&(a.slotsToId[s]=Object.keys(a.slotsToId).length),r.forEach(function(e,t){i[t]=a.slotsToId[s]})}return i}),l=(0,r.flatten)(i),s=e.map(function(e){return e.value}).join(""),u=t.splitSentenceToWords(s);return a.maxWordsPerSentence<u.length&&(a.maxWordsPerSentence=u.length),{sentence:s,intentId:a.intents.findIndex(function(e){return e===n}),tagsForSentence:l}});u=u.concat(i)}),a.intentsWithSlots=o(c),(0,r.shuffle)(u).forEach(function(e){var t=a.intents[e.intentId],n=i[t]||i.default;l[e.intentId]>=n?(s[e.intentId]++,a.testX.push(e.sentence),a.testY.push(e.intentId),a.testY2.push(e.tagsForSentence)):(l[e.intentId]++,a.trainX.push(e.sentence),a.trainY.push(e.intentId),a.trainY2.push(e.tagsForSentence))});var p=a.intents.map(function(e,t){return{intent:e,testing:s[t],training:l[t]}});return{dictionary:a,stats:p}},t.buildDictionary=function(e){var t={ID_TO_WORD_MAP:{},PRETRAINED:new Map,WORD_TO_ID_MAP:{}};return t.PRETRAINED=new Map(e),o(t.PRETRAINED.keys()).forEach(function(e,n){t.ID_TO_WORD_MAP[n]=e,t.WORD_TO_ID_MAP[e]=n}),t};var r=n(179);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}},324:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(175);var r=s(n(169));n(177);var o=s(n(170));n(211);var i=s(n(212));n(299);var a=s(n(468)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=(0,s(n(135)).default)(a.default.Search).withConfig({displayName:"TrainedPipelineTestInput__SearchInput"})(["> input{padding-right:70px !important;}"]),g=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return this,r=(e=p(t)).call.apply(e,[this].concat(i)),h(d(d(n=!r||"object"!==u(r)&&"function"!=typeof r?d(this):r)),"state",{disabled:!1,outTextContent:null}),h(d(d(n)),"renderIntentsList",function(){return l.createElement("div",null,l.createElement("p",null,"The pipeline was trained on this list of intents and slots per intent:"),l.createElement("div",null,l.createElement("ul",null,l.createElement("li",null,"greet"),l.createElement("li",null,"bye"),l.createElement("li",null,"affirmative"),l.createElement("li",null,"negative"),l.createElement("li",null,"wtf (detect insults and out of context stuff)"),l.createElement("li",null,"playMusic -> slots: artist, song"),l.createElement("li",null,"addEventToCalendar -> slots: calendarEvent, dateTime"))),l.createElement("p",null,"You can try a sentence like 'add to my calendar that tomorrow 9am i have to go to the dentist' or 'play new york new york from frank sinatra'"),l.createElement("p",null,"Check the"," ",l.createElement("a",{target:"_blank",href:"https://github.com/rodrigopivi/aida/tree/master/typescript/intents"},"chatito definition files at the github repo"),"  for more details about the training examples generation."))}),h(d(d(n)),"predict",function(e){var t=n.props.pipeline.predict([e]);return Object.assign({},t.classification[0],t.ner[0])}),h(d(d(n)),"handleSubmit",function(e){if(!e||!e.trim())return null;n.setState({disabled:!0},function(){var t=JSON.stringify(n.predict(e),null,2);n.setState({outTextContent:t},function(){n.setState({disabled:!1});var e=document.getElementById("__inputSearch");e&&e.value&&(e.value="")})})}),n}var n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,l.Component),n=t,(a=[{key:"render",value:function(){return l.createElement("div",null,l.createElement(r.default,{type:"flex",justify:"center"},l.createElement(o.default,{span:12},l.createElement(i.default,{title:"Test trained pipeline:",style:{minHeight:"100%"}},l.createElement("p",null,l.createElement(m,{placeholder:"Enter some input to process...",enterButton:"Send",size:"large",onSearch:this.handleSubmit,id:"__inputSearch",disabled:this.state.disabled})),this.renderIntentsList())),l.createElement(o.default,{span:12},l.createElement(i.default,{title:"Pipeline output:",style:{minHeight:"100%"}},l.createElement("pre",{style:{marginTop:"2em"}},this.state.outTextContent||"")))))}}])&&c(n.prototype,a),t}();t.default=g},411:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(114)),o=a(n(804)),i=a(n(412));function a(e){return e&&e.__esModule?e:{default:e}}var l={lang:(0,r.default)({placeholder:"Select date",rangePlaceholder:["Start date","End date"]},o.default),timePickerLocale:(0,r.default)({},i.default)};t.default=l,e.exports=t.default},412:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={placeholder:"Select time"},e.exports=t.default},420:function(e,t){},421:function(e,t){},439:function(e,t){},442:function(e,t){},760:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(175);var r=v(n(169));n(211);var o=v(n(212));n(247);var i=v(n(248));n(794);var a=v(n(799));n(413);var l=v(n(414));n(177);var s=v(n(170)),u=g(n(149)),c=v(n(455)),p=n(137),f=g(n(0)),d=n(314),h=n(323),m=v(n(324));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){b(i,r,o,a,l,"next",e)}function l(e){b(i,r,o,a,l,"throw",e)}a(void 0)})}}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return this,r=(e=P(t)).call.apply(e,[this].concat(i)),E(_(_(n=!r||"object"!==y(r)&&"function"!=typeof r?_(this):r)),"state",{downloadProgress:0,isDownloading:!1,modelsLoaded:!1,selectedModel:"web"}),E(_(_(n)),"pipeline",null),E(_(_(n)),"logger",{debug:function(){return null},error:console.error,log:console.log,warn:console.warn}),E(_(_(n)),"downloadsTrainedModel",function(){var e=w(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={keras:{classification:(0,p.withPrefix)("/models/pretrained/keras/classification/model.json"),ner:(0,p.withPrefix)("/models/pretrained/keras/ner/model.json")},node:{classification:(0,p.withPrefix)("/models/pretrained/node/classification/model.json"),ner:(0,p.withPrefix)("/models/pretrained/node/ner/model.json")},web:{classification:(0,p.withPrefix)("/models/pretrained/web/classification.json"),ner:(0,p.withPrefix)("/models/pretrained/web/ner.json")}},e.next=3,u.loadModel(n[t].classification);case 3:return r=e.sent,e.next=6,u.loadModel(n[t].ner);case 6:return o=e.sent,e.abrupt("return",{pretrainedClassifier:r,pretrainedNer:o});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),E(_(_(n)),"loadSavedModels",w(regeneratorRuntime.mark(function e(){var t,r,o,i,a,l,s,u,c,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[(0,p.withPrefix)("/models/dictionary.json"),(0,p.withPrefix)("/models/dataset_params.json")],e.next=3,n.downloadFiles(t);case 3:return r=e.sent,o=r[0].data,i=r[1].data,e.next=8,n.downloadsTrainedModel(n.state.selectedModel);case 8:return a=e.sent,l=a.pretrainedClassifier,s=a.pretrainedNer,u=(0,h.buildDictionary)(o),c=n.logger,f=new d.AidaPipeline({datasetParams:i,dictionary:u,logger:c,pretrainedClassifier:l,pretrainedNer:s}),n.pipeline=f,n.setState({modelsLoaded:!0}),e.abrupt("return",f);case 17:case"end":return e.stop()}},e,this)}))),E(_(_(n)),"downloadFiles",function(){var e=w(regeneratorRuntime.mark(function e(t){var r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=0,o=0,n.setState({isDownloading:!0,downloadProgress:0}),e.next=5,Promise.all(t.map(function(e){return c.default.get(e,{onDownloadProgress:function(e){var t=e.lengthComputable?e.total:e.target.getResponseHeader("content-length")||e.target.getResponseHeader("x-decompressed-content-length");null!==t&&(r+=t,o+=Math.round(100*e.loaded/r)),n.setState({downloadProgress:o})}})}));case 5:return i=e.sent,n.setState({isDownloading:!1,downloadProgress:100}),e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),n}var n,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,f.Component),n=t,(g=[{key:"componentWillUnmount",value:function(){console.log(u.memory()),u.disposeVariables(),window.tf=u}},{key:"render",value:function(){var e=this;if(this.state.modelsLoaded&&this.pipeline)return f.createElement(m.default,{pipeline:this.pipeline});var t=this.state.isDownloading||100===this.state.downloadProgress,n=t?100===this.state.downloadProgress?"Loading Models...":"Downloading...":"Start demo";return f.createElement(r.default,{type:"flex"},f.createElement(s.default,{span:12,style:{textAlign:"justify"}},f.createElement("h1",null,"Build conversational user experiences"),f.createElement("h3",null,"Aida is a library that helps you build conversational user experiences with this concepts in mind:"),f.createElement("ul",null,f.createElement("li",null,f.createElement("strong",null,"Universal application:")," The trained models should be able to run anywhere, that is why the models have two mirror implementations: in"," ",f.createElement("a",{href:"https://js.tensorflow.com/",target:"_blank"},"TensorflowJS")," ","to be able to train and run from browsers or nodejs, and in"," ",f.createElement("a",{href:"https://keras.io/",target:"_blank"},"Keras")," ","to run in python and export to mobile devices (CoreML for iOS and TensorFlow for Android)."),f.createElement("li",null,f.createElement("strong",null,"Offline support:")," It should be able to train and make predictions without connectivty, no need to have a server-side api, although the trained models can also run server-side behind an api if desired."),f.createElement("li",null,f.createElement("strong",null,"Low memory consumption:")," Having small file size and memory consumption is very important if we want to run from browsers. Most NLU models use huge dictionaries (several gigabytes size) like word2vec, to solve this problem, we are only using pre-trained"," ",f.createElement("a",{href:"https://fasttext.cc/",target:"_blank"},"fastText")," ","bigram and unigram embeddings, this keeps the dictionary very small, fast to download."),f.createElement("li",null,f.createElement("strong",null,"Accurate:")," Carefully crafted, close to state of the art neural network models for text classification and named entity recognition, the models will only get better as the field progresses and the community expands."),f.createElement("li",null,f.createElement("strong",null,"Easy to use:")," Getting started by creating a dataset and training couldn't be easier thanks to"," ",f.createElement("a",{href:"https://rodrigopivi.github.io/Chatito",target:"_blank"},"Chatito"),", you can create a large dataset in minutes, and start training without any setup, just from the browser.")),f.createElement("p",null,"Click 'start demo' to continue.")),f.createElement(s.default,{span:12},f.createElement(o.default,{style:{marginLeft:"2em",textAlign:"center"}},f.createElement("div",null,f.createElement(l.default,{type:"circle",percent:this.state.downloadProgress})),f.createElement("div",{style:{marginTop:"1em",marginBottom:"1em"}},f.createElement(a.default,{defaultValue:this.state.selectedModel,style:{width:280},onChange:function(t){return e.setState({selectedModel:t})}},f.createElement(a.default.Option,{value:"web"},"Load models trained using tf.js web"),f.createElement(a.default.Option,{value:"node"},"Load models trained using tf.js node"),f.createElement(a.default.Option,{value:"keras"},"Load models trained using keras"))),f.createElement("div",null,f.createElement(i.default,{type:"primary",size:"large",disabled:t,onClick:this.loadSavedModels},n)),f.createElement("br",null),f.createElement("p",null,"Will download the trained model (about 3mb compressed)"))))}}])&&O(n.prototype,g),t}();t.default=x},794:function(e,t,n){"use strict";n(134),n(795),n(299)},795:function(e,t,n){},799:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=v(n(114)),o=v(n(122)),i=v(n(111)),a=v(n(116)),l=v(n(112)),s=v(n(113)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),c=v(n(2)),p=n(1063),f=v(p),d=v(n(117)),h=v(n(801)),m=v(n(802)),g=v(n(352));function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n},b={prefixCls:c.default.string,className:c.default.string,size:c.default.oneOf(["default","large","small"]),notFoundContent:c.default.any,showSearch:c.default.bool,optionLabelProp:c.default.string,transitionName:c.default.string,choiceTransitionName:c.default.string,id:c.default.string},w=function(e){function t(e){(0,i.default)(this,t);var n=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.saveSelect=function(e){n.rcSelect=e},n.renderSelect=function(e){var t,i=n.props,a=i.prefixCls,l=i.className,s=void 0===l?"":l,c=i.size,p=i.mode,h=y(i,["prefixCls","className","size","mode"]),m=(0,d.default)((t={},(0,o.default)(t,a+"-lg","large"===c),(0,o.default)(t,a+"-sm","small"===c),t),s),g=n.props.optionLabelProp;n.isCombobox()&&(g=g||"value");var v={multiple:"multiple"===p,tags:"tags"===p,combobox:n.isCombobox()};return u.createElement(f.default,(0,r.default)({},h,v,{prefixCls:a,className:m,optionLabelProp:g||"children",notFoundContent:n.getNotFoundContent(e),ref:n.saveSelect}))},(0,g.default)("combobox"!==e.mode,"The combobox mode of Select is deprecated,it will be removed in next major version,please use AutoComplete instead"),n}return(0,s.default)(t,e),(0,a.default)(t,[{key:"focus",value:function(){this.rcSelect.focus()}},{key:"blur",value:function(){this.rcSelect.blur()}},{key:"getNotFoundContent",value:function(e){var t=this.props.notFoundContent;return this.isCombobox()?void 0===t?null:t:void 0===t?e.notFoundContent:t}},{key:"isCombobox",value:function(){var e=this.props.mode;return"combobox"===e||e===t.SECRET_COMBOBOX_MODE_DO_NOT_USE}},{key:"render",value:function(){return u.createElement(h.default,{componentName:"Select",defaultLocale:m.default.Select},this.renderSelect)}}]),t}(u.Component);t.default=w,w.Option=p.Option,w.OptGroup=p.OptGroup,w.SECRET_COMBOBOX_MODE_DO_NOT_USE="SECRET_COMBOBOX_MODE_DO_NOT_USE",w.defaultProps={prefixCls:"ant-select",showSearch:!1,transitionName:"slide-up",choiceTransitionName:"zoom"},w.propTypes=b,e.exports=t.default},800:function(e,t,n){"use strict";e.exports=function(){}},801:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(114)),o=c(n(111)),i=c(n(116)),a=c(n(112)),l=c(n(113)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),u=c(n(2));function c(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return(0,o.default)(this,t),(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,i.default)(t,[{key:"getLocale",value:function(){var e=this.props,t=e.componentName,n=e.defaultLocale,o=this.context.antLocale,i=o&&o[t];return(0,r.default)({},"function"==typeof n?n():n,i||{})}},{key:"getLocaleCode",value:function(){var e=this.context.antLocale,t=e&&e.locale;return e&&e.exist&&!t?"en-us":t}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode())}}]),t}(s.Component);t.default=p,p.contextTypes={antLocale:u.default.object},e.exports=t.default},802:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(803)),o=l(n(411)),i=l(n(412)),a=l(n(805));function l(e){return e&&e.__esModule?e:{default:e}}t.default={locale:"en",Pagination:r.default,DatePicker:o.default,TimePicker:i.default,Calendar:a.default,Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],notFoundContent:"Not Found",searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items"},Select:{notFoundContent:"Not Found"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file"}},e.exports=t.default},803:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={items_per_page:"/ page",jump_to:"Goto",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"},e.exports=t.default},804:function(e,t,n){"use strict";t.__esModule=!0,t.default={today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},e.exports=t.default},805:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=(r=n(411))&&r.__esModule?r:{default:r};t.default=o.default,e.exports=t.default}}]);
//# sourceMappingURL=component---web-pages-demo-tsx-1f48d20d6fc3484153a5.js.map